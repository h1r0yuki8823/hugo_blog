---
title: "このサイトをhttps化してみたらハマった"
date: 2018-12-18T08:37:59+09:00
draft: false
---

# サイトのhttps化
毎日更新を目標としてるわけではないけど、それでも週３回の更新は目標としていきたいところ。そのためにも日々インプットしていかなければと思う今日この頃<br>

さて今日はこのサイトをhttps化ができたのでその忘備録として残しておく。ハマったところとか、便利だったところとか。<br>

## サーバー証明書の発行
https化自体はそこまで難しいわけではないが、CloudFrontやCertifcateManagerという今まで使ったことがなかったのでそれぞれの設定の意味とかを理解するのに少し手間がかかった。<br>
あとは証明書の検証メールが迷惑フォルダに放り込まれていたこともあったがhttps化は上手くいった。

## AccessDenied
https化にした喜びも束の間、それぞれの記事を開こうとするとAccessDeniedと出力され、記事が読めないという自体に<br>

## 解決方法
ネットを探していると色々な理由でAccessDeniedと表示されているので、原因は人それぞれなのだろうが、僕の場合はこれで解決した。<br>
CloudFrontのOrigins and Origins Groupsから使用しているOriginsを編集。<br>
S3の使用しているバケットのStatic website hostingのエンドポイントに書かれているURLをOrigin Domain Nameに記載。<br>
DistributionのstatusがDeployedになりアクセスしてみると、記事にアクセスできるようになってるではありませんか!

## 総括
今回はプログラミングのように、どこでエラーが出ているかなどのヒントが出ず、原因になりうる箇所も多数あったので解決まで時間がかかってしまった。<br>
もう少し設定の意味とか理解が深ければこうはならなかったのではないかと思うが、ひとまず安心。<br>
引き続きAWSへの知見は広めていきたい。